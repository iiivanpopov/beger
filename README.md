# ğŸ’» Beger - Project For Managing Boards

## âš™ï¸ Tech Stack

### ğŸ“± Front end

**Framework** (yeah that's not a framework): React v19 âš›ï¸

- [Tanstack Router](https://tanstack.com/router/latest) - file based routing
- [Ky](https://github.com/sindresorhus/ky) - http client, provides convenient api
- [Tanstack Query](https://tanstack.com/query/latest) - server state managing, used for comfortable data fetching
- [Zustand](https://zustand.docs.pmnd.rs/getting-started/introduction) - client state managing. used for toasts and auth state, maybe overhead for this project. need to review
- [React Hook Fom](https://react-hook-form.com/) - form state managing
- [Valibot](https://valibot.dev/) - a light version of zod, used for form validations

### ğŸ”’ Backend

**Framework**: Hono v4 ğŸ”¥

- [Drizzle](https://orm.drizzle.team/) - good ts-first orm. i like it
- [Valibot](https://valibot.dev/) - used for validating requests
- [Bun](https://bun.com/) - runtime, has built-in postgres and redis drivers, fast as fuck

### ğŸ”§ Utils

- [ESLint](https://eslint.org/) - linter, currently is irreplaceable. waiting room for biome/oxlint is here
- [Stylelint](https://stylelint.io/) - linter
- [@antfu/eslint-config](https://github.com/antfu/eslint-config) - probably the best open source config. using stylistic
- [@yelaiii/stylelint](https://github.com/iiivanpopov/stylelint-config) - my stylelint config. mostly generated by ai...

## â¬‡ï¸ Installation (docker-compose)

### 1. Clone

```bash
git clone --recurse-submodules https://github.com/iiivanpopov/beger.git
```

### 2. Configure

```dotenv
# /beger/.env

PORT=5333                                           # DEFAULT
JWT_ACCESS_SECRET=c9e5fd5df58770fea7063ebad0c78d6c  # DEFAULT
JWT_REFRESH_SECRET=2d03a2683014ad790487149e73d97bc2 # DEFAULT
ADMIN_PASSWORD=
DB_USER=postgres                                    # DEFAULT
DB_PASSWORD=postgres                                # DEFAULT
SHEET_URL=
```

Make sure to place the `SHEET_URL` inside of the **"double quotes"**

#### 2.1. Configure **PORT**

If you want to use different **backend** port,
you also need to configure `/beger/beger-frontend/nginx.conf`

```dotenv
# /beger/.env

PORT=4111
```

```conf
# /beger/beger-frontend/nginx.conf

location /api/ {
  proxy_pass http://backend:4111/api/;
  ...
}
```

## âš¡ Running

### 1. Build the project

in the `/beger/` directory

```bash
docker-compose build
```

### 2. Run

```bash
docker-compose up
```

## â¬ Updating

### 1. Pull changes

```bash
git pull --recurse-submodules
git submodule update --recursive --remote
```

### 2. Update containers

```bash
docker-compose build
docker-compose up
```

## â‰ï¸ Don't have the sheet url?

Here is step by step guide how to get it

### Be sure that you have set the exact headers

![Modal Menu](/assets/proper-format.png)

1. Open sheet in the **Google Sheets**
2. Goto File -> Share -> Publish to web
3. In the modal menu select the **CSV** (Comma-Separated Values) data type instead of the default **Web Page**

![Modal Menu](/assets/get-sheet-url.png)

## ğŸ‘€ Preview

![Login Page](/assets/login-page.png)
![Login Modal](/assets/login-modal.png)

### ğŸ§‘â€âš•ï¸ User view

![Repairs Page](/assets/repairs-page.png)
![Test Results Page](/assets/test-results-page.png)

### ğŸ‘® Admin view

![Users Page](/assets/users-page.png)

## âœ… TODO

- Implement `/records` route for admin
- Improve `Datepicker` ui kit component
- **Tracking** of deleted records
- Edit users functionality
